#!/usr/bin/env python
# coding: utf-8
# Copyright (c) 2016 Fabian Barkhau <f483@storj.io>
# License: MIT (see LICENSE file)


import json
import sys
from picopayments_client import cli
from picopayments_client import api
from picopayments_client import __version__


if __name__ == "__main__":
    kwargs = cli.parse(sys.argv[1:])
    # print(json.dumps(kwargs, indent=2, sort_keys=True))
    # import pudb;pu.db

    result = None
    if kwargs["terms"] is True:
        result = api.terms(**kwargs)
    elif kwargs["version"] is True:
        print(__version__)
    elif kwargs["srv_start"] is True:
        result = api.serve_start(**kwargs)
    elif kwargs["hub_funding_addresses"] is True:
        result = api.hub_funding_addresses(**kwargs)
    elif kwargs["get_balances"] is True:
        result = api.get_balances(**kwargs)
    elif kwargs["blockchain_send_funds"] is True:
        result = api.blockchain_send_funds(**kwargs)
    else:
        print("FIXME print help")

    if result is not None:
        print(json.dumps(result, indent=2, sort_keys=True))
