#!/usr/bin/env python
# coding: utf-8
# Copyright (c) 2016 Fabian Barkhau <f483@storj.io>
# License: MIT (see LICENSE file)


import json
import sys
from picopayments_client import cli
from picopayments_client import api
from picopayments_client import etc
from picopayments_client import __version__


if __name__ == "__main__":
    kwargs = cli.parse(sys.argv[1:])
    etc.load(kwargs["basedir"], kwargs["testnet"])

    result = None
    if kwargs["hub_status"] is True:
        result = api.hub_status(**kwargs)
    elif kwargs["version"] is True:
        print(__version__)
    elif kwargs["get_balances"] is True:
        result = api.get_balances(**kwargs)
    elif kwargs["blockchain_send"] is True:
        result = api.blockchain_send(**kwargs)
    elif kwargs["serve"] is True:
        result = api.serve(**kwargs)
    else:
        print("FIXME print help")

    if result is not None:
        print(json.dumps(result, indent=2, sort_keys=True))
