#!/usr/bin/env python
# coding: utf-8
# Copyright (c) 2016 Fabian Barkhau <f483@storj.io>
# License: MIT (see LICENSE file)


import json
import sys
from picopayments_cli import cli
from picopayments_cli import api
from picopayments_cli import etc


if __name__ == "__main__":
    kwargs, parser = cli.parse_args(sys.argv[1:])
    etc.load(kwargs.pop("basedir"), kwargs.pop("testnet"))
    command = kwargs.pop("command")
    if command is None:
        parser.print_help()
    else:
        result = api.__getattribute__(command)(**kwargs)
        if result is not None:
            print(json.dumps(result, indent=4, sort_keys=True))

    # from picopayments_cli import rpc
    # calltime = rpc.method_cumulative_calltime
    # print("method_calltime_cumulative", json.dumps(calltime, indent=2))
    # print("method_calltime_total", sum(list(calltime.values())))
